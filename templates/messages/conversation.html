<!doctype html>
<html>
  <head>
    <title>Messages</title>
    <meta charset='utf-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1, shrink-to-fit=no'>
    <meta http-equiv='Content-Type' content='text/html; charset=utf-8' />
    <meta name='apple-mobile-web-app-capable' content='yes'>
    <meta name='mobile-web-app-capable' content='yes'>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css'>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src='https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js'></script>
    <script src='https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js' integrity='sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM' crossorigin='anonymous'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js' integrity='sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1' crossorigin='anonymous'></script>
    <style>
      html,body {
        margin: 0;
        padding: 0;
      }
    </style>
    <link rel='stylesheet' href='/assets/css/SocialFoot.css'>
    <script src="/assets/scripts/SocialFoot.js"></script>
    <script src="/assets/scripts/messages.js"></script>
  </head>
  <body id='body'>
    <nav class="navbar navbar-transparent">
      <div class='container-fluid'>
        <button type="button" class="navbar-toggle col-md-1 col-xs-2" data-toggle="collapse" data-target="#utilities">
            <img src="/assets/images/menuBars.png" alt="Menu Bars" width="100%">
        </button>
          <div class='navbar-header'>
              <a href='/live'>
                <img src="/assets/images/SocialFootLogo.png" width="100px">
              </a>
          </div>
          <div class="collapse navbar-collapse" id="utilities">
            <ul class='nav navbar-nav'>
              <li class='active'><a href='/live'>Home</a></li>
              <li><a href='/live/search'>Search</a></li>
              <li><a href='/report'>Report</a></li>
            </ul>
            <ul class='nav navbar-nav navbar-right'>
              <li><a href='/live/post'>Post</a></li>
              <li class='dropdown'>
                <a class='dropdown-toggle' data-toggle='dropdown'><span class='glyphicon glyphicon-user'></span> {{.Username}}</a>
                <ul class='dropdown-menu'>
                  <li class='dropdown-item'><a href='/live/profile'>Settings</a></li>
                  <li class='dropdown-item'><a href='/live/messages'>Messages</a></li>
                  <li class='dropdown-item'><a href='/live/feed'>Your Feed</a></li>
                  <div class='dropdown-divider'></div>
                  <li class='dropdown-item'><a onclick="signOut()">Sign out</a></li>
                </ul>
              </li>
            </ul>
          </div>
      </div>
    </nav>
    <div class="container-fluid">
      <!-- Side bar -->
      <div class="col-sm-2 col-xs-12">

        <a class="btn-block btn-primary color-t w-100 " style="text-align:center;padding-top:5px;padding-bottom:5px;" href="/live/messages">
          <i class="fa fa-arrow-left"></i> Back
        </a>
      </div>
      <!-- Make Blackish Background -->
      <div class="col-sm-10 col-xs-12">
        <!-- List of texts that auto scrolls to bottom -->
        <div id="textList" class="row">

        </div>

        <!-- Make a texting footer that sticks to the bottom -->
        <div class="row fixed-row-bottom">
          <div class="col-xs-8">
            <input type="text" name="messenger" class="form-control" placeholder="Send Message...">
          </div>
          <div class="col-xs-4">
            <button type="button" class="btn btn-block w-100 btn-primary color-t" onclick="sendMessage({{.Userid}},{{.Participant}})">SEND</button>
          </div>
        </div>

      </div>
    </div>
    <script>
      var messageInt;
      $(document).ready(function() {
        messageInt = setInterval(getMessages, 500,parseInt({{.Userid}}),parseInt({{.ConvoID}}));
      });
    </script>
  </body>
</html>
